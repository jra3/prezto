## -*- coding: utf-8;mode: sh; -*- ##

local master_file="/usr/facebook/ops/rc/master.zshrc"
if [ -f "$master_file" ]; then
  source "$master_file"
fi

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

EMACS_DIR=~/.dot-emacs
EMACS_SOCKET_NAME="sockettome.$HOST"
EMACS_SOCKET_FILE="/tmp/$EMACS_SOCKET_NAME"


export PATH=~/bin:~/.cask/bin:/opt/homebrew/bin:$PATH

alias g=git

# if [ $( uname ) = "Darwin" ]; then
#     alias e="open -a /Applications/Emacs.app "
# else
#     alias e=_emacsfun
# fi

# alias emacs=e
# ripgrep > silver searcher, but my fingers disagree
alias ag=rg


gff ()
{
    if [[ -z "$1" ]]; then
        echo "usage: gff <branch to fast-forward to HEAD>" > /dev/stderr;
        return 2;
    fi;
    git fetch . HEAD:“$1” && git checkout "$1"
}

gffm ()
{
    local ISH="${1:-HEAD}";
    shift;
    git fetch . "$ISH":$(git-main-branch) && git checkout $(git-main-branch)
}

export EMACS_DIR=~/.dot-emacs
export INPUTRC=~/.inputrc

# EDITOR="emacsclient --socket-name=$EMACS_SOCKET_FILE --tty"
# HGMERGE="emacsclient --socket-name=$EMACS_SOCKET_FILE --tty"

# Make the shell's builtin pwd default to -P
set -o physical

# Use bourne-shell-compatible word splitting.
setopt SH_WORD_SPLIT

# I don't particularly like the extended glob stuff...
unsetopt EXTENDED_GLOB

# Compatibility with bash's PROMPT_COMMAND
precmd() { eval "$PROMPT_COMMAND" }
